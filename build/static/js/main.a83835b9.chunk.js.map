{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/SignUp.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","pages/login/Login.js","hooks/useLogin.js","hooks/useSignup.js","pages/signup/SignUp.js","hooks/useFirestore.js","pages/home/TransactionForm.js","pages/home/TransactionList.js","pages/home/Home.js","hooks/useCollection.js","components/Navbar.js","hooks/useLogout.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","Login","useState","email","setEmail","password","setPassword","isCanceled","setIsCanceled","error","setError","isPending","setIsPending","login","a","signInWithEmailAndPassword","res","message","useLogin","onSubmit","e","preventDefault","className","styles","onChange","target","disabled","SignUp","displayName","setDisplayName","signup","createUserWithEmailAndPassword","updateProfile","useSignup","initialState","document","success","firestoreReducer","useFirestore","collection","response","ref","dispatchIfNotCancelled","addDocument","doc","createdAt","fromDate","Date","add","deleteDocument","id","delete","deteledDocument","TransactionForm","uid","name","setName","amount","setAmount","required","TransactionList","transactions","map","transaction","onClick","Home","_query","_orderBy","documents","setDocuments","query","useRef","current","orderBy","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","container","content","sidebar","Navbar","logout","signOut","useLogout","navbar","title","to","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a83835b9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__3bftD\",\"content\":\"Home_content__18qU0\",\"sidebar\":\"Home_sidebar__21xz5\",\"transactions\":\"Home_transactions__3_tqr\",\"name\":\"Home_name__4a_Tj\",\"amount\":\"Home_amount__1MW_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__31-FB\",\"title\":\"Navbar_title__2CGsW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__1NBYb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"SignUp_signup-form__3UI5r\"};","import firebase from \"firebase/app\"\nimport \"firebase/firestore\"\nimport \"firebase/auth\"\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBENdmJlE0CC6fKBlrNLHD8Yf42_HkNUfw\",\n  authDomain: \"moneymanagement-bc671.firebaseapp.com\",\n  projectId: \"moneymanagement-bc671\",\n  storageBucket: \"moneymanagement-bc671.appspot.com\",\n  messagingSenderId: \"984646572430\",\n  appId: \"1:984646572430:web:776cd90e41760163566cdf\",\n}\n\n// init firebase\nfirebase.initializeApp(firebaseConfig)\n\n// init service\nconst projectFirestore = firebase.firestore()\nconst projectAuth = firebase.auth()\n\n//timestamp\nconst timestamp = firebase.firestore.Timestamp\n\nexport { projectFirestore, projectAuth, timestamp }\n","import { createContext, useReducer, useEffect } from \"react\"\nimport { projectAuth } from \"../firebase/config\"\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      return { ...state, user: action.payload }\n    case \"LOGOUT\":\n      return { ...state, user: null }\n    case \"AUTH_IS_READY\":\n      return { ...state, user: action.payload, authIsReady: true }\n    default:\n      return state\n  }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, {\n    user: null,\n    authIsReady: false,\n  })\n\n  useEffect(() => {\n    const unsub = projectAuth.onAuthStateChanged((user) => {\n      dispatch({ type: \"AUTH_IS_READY\", payload: user })\n      unsub()\n    })\n  }, [])\n\n  console.log(\"AuthContext state:\", state)\n\n  return (\n    <AuthContext.Provider value={{ ...state, dispatch }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if (!context) {\n    throw Error('useAuthContext must be inside an AuthContextProvider')\n  }\n\n  return context\n}","import { useState } from 'react'\nimport { useLogin } from '../../hooks/useLogin'\n\n// styles\nimport styles from './Login.module.css'\n\nexport default function Login() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const { login, error, isPending } = useLogin()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    login(email, password)\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={styles['login-form']}>\n      <h2>Login</h2>\n      <label>\n        <span>email:</span>\n        <input\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n          value={email}\n        />\n      </label>\n      <label>\n        <span>password:</span>\n        <input\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n          value={password}\n        />\n      </label>\n      {!isPending && <button className=\"btn\">Login</button>}\n      {isPending && <button className=\"btn\"\n        disabled>Login</button>}\n      {error && <p>{error}</p>}\n\n    </form>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogin = () => {\n  const [isCanceled, setIsCanceled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthContext()\n\n  const login = async (email, password) => {\n    setError(null)\n    setIsPending(true)\n\n    // sign the user out\n    try {\n      const res = await projectAuth.signInWithEmailAndPassword(email, password)\n\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCanceled) {\n        setIsPending(false)\n        setError(null)\n      }\n    }\n    catch (err) {\n      if (!isCanceled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => setIsCanceled(true)\n  }, [])\n\n  return { login, error, isPending }\n}","import { useState, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useSignup = () => {\n  const [isCanceled, setIsCanceled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthContext()\n\n  const signup = async (email, password, displayName) => {\n    setError(null)\n    setIsPending(true)\n    try {\n      const res = await projectAuth.createUserWithEmailAndPassword(email, password)\n\n      if (!res) {\n        throw new Error('Could not complete signup')\n      }\n\n      // add display name to user\n      await res.user.updateProfile({ displayName })\n\n      // dispatch login action\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCanceled) {\n        setIsPending(false)\n        setError(null)\n      }\n    }\n    catch (err) {\n      if (!isCanceled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n  useEffect(() => {\n    return () => setIsCanceled(true)\n  }, [])\n\n\n  return { error, isPending, signup }\n}","import { useState } from 'react'\nimport { useSignup } from '../../hooks/useSignup'\n\nimport styles from './SignUp.module.css'\n\nexport default function SignUp() {\n  const [email, setEmail] = useState('')\n  const [displayName, setDisplayName] = useState('')\n  const [password, setPassword] = useState('')\n  const { signup, isPending, error } = useSignup()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    signup(email, password, displayName)\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={styles['signup-form']}>\n      <h2>SignUp</h2>\n      <label>\n        <span>email:</span>\n        <input\n          type=\"email\"\n          onChange={(e) => setEmail(e.target.value)}\n          value={email}\n        />\n      </label>\n      <label>\n        <span>DisplayName:</span>\n        <input\n          type=\"text\"\n          onChange={(e) => setDisplayName(e.target.value)}\n          value={displayName}\n        />\n      </label>\n      <label>\n        <span>password:</span>\n        <input\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n          value={password}\n        />\n      </label>\n      {!isPending && <button className=\"btn\">SignUp</button>}\n      {isPending && <button className=\"btn\" disabled>loading</button>}\n      {error && <p>{error}</p>}\n\n    </form>\n  )\n}\n","import { useState, useEffect, useReducer } from \"react\"\nimport { projectFirestore, timestamp } from \"../firebase/config\"\n\nlet initialState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null,\n}\n\nconst firestoreReducer = (state, action) => {\n  switch (action.type) {\n    case \"IS_PENDING\":\n      return {\n        isPending: true,\n        document: null,\n        success: false,\n        error: null,\n      }\n    case \"ADDED_DOCUMENT\":\n      return {\n        isPending: false,\n        document: action.payload,\n        success: true,\n        error: null,\n      }\n    case \"DELETED_DOCUMENT\": {\n      return {\n        isPending: false,\n        document: null,\n        success: true,\n        error: null,\n      }\n    }\n    case \"ERROR\":\n      return {\n        isPending: false,\n        document: null,\n        success: false,\n        error: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport const useFirestore = (collection) => {\n  const [response, dispatch] = useReducer(firestoreReducer, initialState)\n  const [isCanceled, setIsCanceled] = useState(false)\n\n  // collection ref\n  const ref = projectFirestore.collection(collection)\n\n  // only dispatch if not cancelled\n  const dispatchIfNotCancelled = (action) => {\n    if (!isCanceled) {\n      dispatch(action)\n    }\n  }\n\n  // add document\n  const addDocument = async (doc) => {\n    dispatch({ type: \"IS_PENDING\" })\n    try {\n      const createdAt = timestamp.fromDate(new Date())\n      const addedDocument = await ref.add({ ...doc, createdAt })\n      dispatchIfNotCancelled({ type: \"ADDED_DOCUMENT\" })\n    } catch (err) {\n      dispatchIfNotCancelled({ type: \"ERROR\", payload: err.message })\n    }\n  }\n\n  // delete document\n  const deleteDocument = async (id) => {\n    dispatch({ type: \"IS_PENDING\" })\n    try {\n      const deteledDocument = await ref.doc(id).delete()\n      dispatchIfNotCancelled({\n        type: \"DELETED_DOCUMENT\",\n        payload: deteledDocument,\n      })\n    } catch (err) {\n      dispatchIfNotCancelled({ type: \"ERROR\", payload: \"could not delete\" })\n    }\n  }\n\n  // cleanup\n  useEffect(() => {\n    return () => setIsCanceled(true)\n  }, [])\n\n  return { addDocument, deleteDocument, response }\n}\n","import { useState, useEffect } from \"react\"\nimport { useFirestore } from \"../../hooks/useFirestore\"\n\nexport default function TransactionForm({ uid }) {\n  const [name, setName] = useState(\"\")\n  const [amount, setAmount] = useState(\"\")\n  const { addDocument, response } = useFirestore(\"transactions\")\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    addDocument({\n      uid: uid,\n      name,\n      amount,\n    })\n  }\n\n  useEffect(() => {\n    if (response.success) {\n      setName(\"\")\n      setAmount(\"\")\n    }\n  }, [response.success])\n\n  return (\n    <>\n      <h3>Add a Transaction</h3>\n      <form onSubmit={handleSubmit}>\n        <label>\n          <span>Transaction name:</span>\n          <input\n            type=\"text\"\n            required\n            onChange={(e) => setName(e.target.value)}\n            value={name}\n          />\n        </label>\n        <label>\n          <span>Amount ($):</span>\n          <input\n            type=\"number\"\n            required\n            onChange={(e) => setAmount(e.target.value)}\n            value={amount}\n          />\n        </label>\n        <button>Add Transaction</button>\n      </form>\n    </>\n  )\n}\n","import styles from \"./Home.module.css\"\nimport { useFirestore } from \"../../hooks/useFirestore\"\n\nexport default function TransactionList({ transactions }) {\n  const { deleteDocument, response } = useFirestore(\"transactions\")\n  console.log(response)\n\n  return (\n    <ul className={styles.transactions}>\n      {transactions.map((transaction) => (\n        <li key={transaction.id}>\n          <p className={styles.name}>{transaction.name}</p>\n          <p className={styles.amount}>${transaction.amount}</p>\n          <button onClick={() => deleteDocument(transaction.id)}>x</button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n","import styles from \"./Home.module.css\"\nimport TransactionForm from \"./TransactionForm\"\nimport TransactionList from \"./TransactionList\"\nimport { useAuthContext } from \"../../hooks/useAuthContext\"\nimport { useCollection } from \"../../hooks/useCollection\"\n\nexport default function Home() {\n  const { user } = useAuthContext()\n  const { documents, error } = useCollection(\n    \"transactions\",\n    [\"uid\", \"==\", user.uid],\n    [\"createdAt\", \"desc\"]\n  )\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.content}>\n        {error && <p>{error}</p>}\n        {documents && <TransactionList transactions={documents} />}\n      </div>\n      <div className={styles.sidebar}>\n        <TransactionForm uid={user.uid} />\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useState, useRef } from \"react\"\nimport { projectFirestore } from \"../firebase/config\"\n\nexport const useCollection = (collection, _query, _orderBy) => {\n  const [documents, setDocuments] = useState(null)\n  const [error, setError] = useState(null)\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current\n  const orderBy = useRef(_orderBy).current\n\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection)\n\n    if (query) {\n      ref = ref.where(...query)\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy)\n    }\n\n    const unsubscribe = ref.onSnapshot(\n      (snapshot) => {\n        let results = []\n        snapshot.docs.forEach((doc) => {\n          console.log(doc)\n          results.push({ ...doc.data(), id: doc.id })\n        })\n\n        // update state\n        setDocuments(results)\n        setError(null)\n      },\n      (error) => {\n        console.log(error)\n        setError(\"could not fetch the data\")\n      }\n    )\n\n    // unsubscribe on unmount\n    return () => unsubscribe()\n  }, [collection, query, orderBy])\n\n  return { documents, error }\n}\n","import styles from \"./Navbar.module.css\"\nimport { Link } from \"react-router-dom\"\nimport { useLogout } from \"../hooks/useLogout\"\nimport { useAuthContext } from \"../hooks/useAuthContext\"\n\nexport default function Navbar() {\n  const { logout } = useLogout()\n  const { user } = useAuthContext()\n\n  return (\n    <nav className={styles.navbar}>\n      <ul>\n        <li className={styles.title}>Money management</li>\n        {!user && (\n          <>\n            <li>\n              <Link to=\"/login\">Login</Link>\n            </li>\n            <li>\n              <Link to=\"/signup\">SignUp</Link>\n            </li>\n          </>\n        )}\n        {user && (\n          <>\n            <li>Hello, {user.displayName}</li>\n            <li>\n              <button className=\"btn\" onClick={logout}>\n                Logout\n              </button>\n            </li>\n          </>\n        )}\n      </ul>\n    </nav>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogout = () => {\n  const [isCanceled, setIsCanceled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthContext()\n\n\n  const logout = async () => {\n    setError(null)\n    setIsPending(true)\n\n    // sign the user out\n    try {\n      await projectAuth.signOut()\n\n      dispatch({ type: 'LOGOUT' })\n\n      if (!isCanceled) {\n        setIsPending(false)\n        setError(null)\n      }\n    }\n    catch (err) {\n      if (!isCanceled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => setIsCanceled(true)\n  }, [])\n\n  return { logout, error, isPending }\n\n}","// import './App.css'\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\"\nimport { useAuthContext } from \"./hooks/useAuthContext\"\nimport Login from \"./pages/login/Login\"\nimport SignUp from \"./pages/signup/SignUp\"\nimport Home from \"./pages/home/Home\"\nimport Navbar from \"./components/Navbar\"\n\nfunction App() {\n  const { authIsReady, user } = useAuthContext()\n\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {!user && <Redirect to=\"/login\" />}\n              {user && <Home />}\n            </Route>\n            <Route path=\"/login\">\n              {!user && <Login />}\n              {user && <Redirect to=\"/\" />}\n            </Route>\n            <Route path=\"/signup\">\n              {!user && <SignUp />}\n              {user && <Redirect to=\"/\" />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}